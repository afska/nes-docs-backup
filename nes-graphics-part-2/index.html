<!DOCTYPE html>
<!-- saved from url=(0058)http://www.dustmop.io/blog/2015/06/08/nes-graphics-part-2/ -->
<html lang="en-US"><input type="hidden" id="__yoroi_connector_api_injected_type" value="prod"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width">
<title>NES Graphics ‚Äì Part 2 | dustmop.io blog</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="http://www.dustmop.io/blog/xmlrpc.php">
<!--[if lt IE 9]>
<script src="http://www.dustmop.io/blog/wp-content/themes/duster/js/html5.js" type="text/javascript"></script>
<![endif]-->

<link rel="dns-prefetch" href="http://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="dustmop.io blog ¬ª Feed" href="http://www.dustmop.io/blog/feed/">
<link rel="alternate" type="application/rss+xml" title="dustmop.io blog ¬ª Comments Feed" href="http://www.dustmop.io/blog/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="dustmop.io blog ¬ª NES Graphics ‚Äì Part 2 Comments Feed" href="http://www.dustmop.io/blog/2015/06/08/nes-graphics-part-2/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.dustmop.io\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.20"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])?!1:!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55358,56760,9792,65039],[55358,56760,8203,9792,65039])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/wp-emoji-release.min.js.download" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="duster-css" href="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/style.css" type="text/css" media="all">
<link rel="https://api.w.org/" href="http://www.dustmop.io/blog/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.dustmop.io/blog/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.dustmop.io/blog/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Stupid NES Tricks ‚Äì Screen Wrap Detection" href="http://www.dustmop.io/blog/2015/05/20/stupid-nes-tricks-screen-wrap-detection/">
<link rel="next" title="Select Menu Graphics Analysis" href="http://www.dustmop.io/blog/2015/07/02/select-menu-graphics-analysis/">
<meta name="generator" content="WordPress 4.9.20">
<link rel="shortlink" href="http://www.dustmop.io/blog/?p=104">
<link rel="alternate" type="application/json+oembed" href="http://www.dustmop.io/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.dustmop.io%2Fblog%2F2015%2F06%2F08%2Fnes-graphics-part-2%2F">
<link rel="alternate" type="text/xml+oembed" href="http://www.dustmop.io/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.dustmop.io%2Fblog%2F2015%2F06%2F08%2Fnes-graphics-part-2%2F&amp;format=xml">

<!-- Easy WP Meta Description -->
<meta name="description" content="Guide to the NES graphics continued. Scrolling and sprites.">
<!-- /Easy WP Meta Description -->

				<link rel="canonical" href="http://www.dustmop.io/blog/2015/06/08/nes-graphics-part-2/">
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		</head>

<body class="post-template-default single single-post postid-104 single-format-standard singular">
<div id="page" class="hfeed">
	<header id="branding" role="banner">
<style>
#top-ad {
  padding-top: 10px;
  text-align: center;
  width: 728px;
  height: 90px;
  margin-left: auto;
  margin-right: auto;
}
#searchform {
  display: none;
}
</style>
		<!--
                        <div id="top-ad">
<a href="http://starversus.com/" target="_blank"><img src="http://www.dustmop.io/blog/wp-content/uploads/2015/07/banner-ad-LEADERBOARD.png" width="728" height="90" class="alignnone" /></a>
                        </div>
-->

			<hgroup>
				<h1 id="site-title"><span><a href="http://www.dustmop.io/blog/" title="dustmop.io blog" rel="home">dustmop.io blog</a></span></h1>
				<h2 id="site-description"></h2>
			</hgroup>

			
							<form method="get" id="searchform" action="http://www.dustmop.io/blog/">
	<input type="text" class="field" name="s" id="s" placeholder="Search">
	<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search">
</form>
			
			<nav id="access" role="navigation">
				<h1 class="section-heading">Main menu</h1>
				<div class="skip-link screen-reader-text"><a href="#content" title="Skip to content">Skip to content</a></div>

				<div class="menu-menu-container"><ul id="menu-menu" class="menu"><li id="menu-item-73" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-73"><a href="http://dustmop.io/blog">Blog</a></li>
<li id="menu-item-72" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-72"><a href="http://dustmop.io/">Main</a></li>
<li id="menu-item-74" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-74"><a href="http://starversus.com/">Star Versus</a></li>
</ul></div>			</nav><!-- #access -->
	</header><!-- #branding -->


	<div id="main">
<div id="primary">
	<div id="content" role="main">

		
			<nav id="nav-single">
				<h1 class="section-heading">Post navigation</h1>
				<span class="nav-previous"><a href="http://www.dustmop.io/blog/2015/05/20/stupid-nes-tricks-screen-wrap-detection/" rel="prev">‚Üê Previous</a></span>
				<span class="nav-next"><a href="http://www.dustmop.io/blog/2015/07/02/select-menu-graphics-analysis/" rel="next">Next ‚Üí</a></span>
			</nav><!-- #nav-single -->

			
<article id="post-104" class="post-104 post type-post status-publish format-standard hentry category-nes tag-graphics tag-nes">
	<header class="entry-header">
		<h1 class="entry-title">NES Graphics ‚Äì Part 2</h1>

		<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://www.dustmop.io/blog/2015/06/08/nes-graphics-part-2/" rel="bookmark"><time class="entry-date" datetime="2015-06-08T11:18:30+00:00" pubdate="">June 8, 2015</time></a> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://www.dustmop.io/blog/author/dustmop/" title="View all posts by dustmop">dustmop</a></span>		</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

	<div class="entry-content">
		<p><a href="http://www.dustmop.io/blog/2015/04/28/nes-graphics-part-1/">Part 1</a> discussed the components of NES background graphics ‚Äì chr, nametable, palettes, and attributes. But this was only half of the story.</p>
<p>For starters, there are actually two nametables <a href="#nes-graphics-2-4-nametables">[1]</a>. They each have their own attributes for determining color, though they share the same chr. Cartridge hardware determines their position, either side-by-side or stacked on top. Shown here are examples of games using each orientation, Lode Runner (1984) and Bubble Bobble (1988).</p>
<p><img src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/lode-runner-scrolling.png" alt="lode-runner-scrolling" width="512" height="500" class="alignnone wp-image-110" srcset="http://www.dustmop.io/blog/wp-content/uploads/2015/06/lode-runner-scrolling.png 512w, http://www.dustmop.io/blog/wp-content/uploads/2015/06/lode-runner-scrolling-300x293.png 300w, http://www.dustmop.io/blog/wp-content/uploads/2015/06/lode-runner-scrolling-500x488.png 500w" sizes="(max-width: 512px) 100vw, 512px"></p>
<p><img src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/bubble-bobble-scrolling.png" alt="bubble-bobble-scrolling" width="532" height="480" class="alignnone wp-image-111" srcset="http://www.dustmop.io/blog/wp-content/uploads/2015/06/bubble-bobble-scrolling.png 532w, http://www.dustmop.io/blog/wp-content/uploads/2015/06/bubble-bobble-scrolling-300x271.png 300w, http://www.dustmop.io/blog/wp-content/uploads/2015/06/bubble-bobble-scrolling-500x451.png 500w" sizes="(max-width: 532px) 100vw, 532px"></p>
<p><span id="more-104"></span></p>
<h1>SCROLLING</h1>
<p>To exploit having two nametables, the PPU supports pixel-at-a-time scrolling in both the X and Y dimensions. It‚Äôs controlled using a memory-mapped register at address $2005, meaning that writing just two bytes to this location moves the entire screen as many pixels as needed <a href="#nes-graphics-2-10-bit-scroll">[2]</a>. When the NES premiered, this was a major advantage over other home consoles, which often required rewriting the entire video memory for scrolling. This easy to use facility led to a proliferation of action platformers and shooters, and was a major reason the system was so successful.</p>
<p>For a simple game whose playfield is only two screens wide, like Load Runner, all that‚Äôs needed is to fill both nametables, and adjust the scroll as needed. But most scrolling games instead have levels with an arbitrary width. To implement these, the game needs to update the off-screen portion of the nametables before it scrolls into view. The scrolling value wraps around, but as the nametable is continuously updated, it gives the illusion of infinite size.</p>
<p><img src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/megaman-animation.gif" alt="megaman-animation" width="512" height="500" class="alignnone wp-image-109"></p>
<h1>SPRITES</h1>
<p>Aside from scrolling across nametables, there‚Äôs a whole other side to NES graphics: sprites. As opposed to nametables, which need to be aligned to grids, sprites can be arbitrarily positioned, making them useful for representing player characters, obstacles, projectiles, or anything with complex movement. For example, in the above scene from Mega Man (1987) the player character, score, and life bar all use sprites, allowing them to break from the nametable grid as the screen scrolls.</p>
<p>Sprites have their own chr page <a href="#nes-graphics-2-sprite-chr-page">[3]</a> and set of 4 palettes. Additionally, they occupy a 256-byte page of memory that lists each sprite‚Äôs position and appearance (turns out, the NES‚Äôs video memory is slightly more than double of what was implied in Part 1). The format of these entries is a bit unusual, containing first the Y position, then tile number, then attribute, then X position <a href="#nes-graphics-2-sprite-struct">[4]</a>. Since each entry takes 4 bytes, there is a hard limit of 256 / 4 = 64 sprites on screen at a time.</p>
<p>The Y and X bytes are the upper-left most pixel of the rendered sprite. As a result, a sprite can be clipped off of the right side of the screen, but will leave an empty gap on the left. The tile byte is similar to the value in a nametable, except that sprites use their own chr for tile data. The attribute byte is a pack of bits that serve three purposes: two bits for the palette, two bits to flip a sprite horizontally or vertically, and one bit to render the sprite behind nametables <a href="#nes-graphics-2-backgroundness">[5]</a>.</p>
<h1>LIMITATIONS</h1>
<p>Whereas modern systems allow sprites of arbitrary sizes, on the NES a sprite must be 8√ó8 <a href="#nes-graphics-2-8x16">[6]</a>, due to the constraints of chr. Larger objects are made up of multiple sprites, and software has to ensure the individual pieces are rendered next to each other. For example, the Megaman character is made up of 10 sprites, which also allows for more colors to be used, specifically his white eyes and skin tone.</p>
<p><img src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/megaman-breakdown.png" alt="megaman-breakdown" width="264" height="264" class="alignnone wp-image-113" srcset="http://www.dustmop.io/blog/wp-content/uploads/2015/06/megaman-breakdown.png 264w, http://www.dustmop.io/blog/wp-content/uploads/2015/06/megaman-breakdown-150x150.png 150w" sizes="(max-width: 264px) 100vw, 264px"></p>
<p>A major restriction that comes with using sprites is the 8-per-scanline restriction. For any given horizontal line of the screen, if more than 8 sprites appear, those that appear later in memory simply won‚Äôt be rendered. This is the cause of flickering in sprite heavy games; software will rotate the addresses of sprites in memory, so that each renders at least part of the time.</p>
<p><img src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/megaman-flicker.gif" alt="megaman-flicker" width="166" height="64" class="alignnone wp-image-107"></p>
<p>Finally, scrolling does not interact with sprites; a sprite‚Äôs position on screen is determined by it‚Äôs Y and X values, regardless of what the scroll position is. Sometimes this is an advantage, when the level moves around the player or a HUD stays in a fixed position. Other times, though, it is a disadvantage, where a moving object needs to be repositioned and then adjusted by how much the scroll has changed.</p>
<h1>FOOTNOTES</h1>
<p><a name="nes-graphics-2-4-nametables"></a>[1] Technically speaking, there are actually 4 nametables, but they are mirrored such that only 2 contain unique graphics. Side-by-side is called vertical mirroring, whereas stacked is called horizontal mirroring.</p>
<p><a name="nes-graphics-2-10-bit-scroll"></a>[2] There is also a register that chooses which nametable to start rendering from, so the scroll is actually a 10-bit value, or 9-bit if we take mirroring into account.</p>
<p><a name="nes-graphics-2-sprite-chr-page"></a>[3] This is not necessarily true. The PPU can be configured at will to use the same chr page for nametables as sprites.</p>
<p><a name="nes-graphics-2-sprite-struct"></a>[4] This order might be used because it matches the data the PPU has to care about in order to render efficiently.</p>
<p><a name="nes-graphics-2-backgroundness"></a>[5] This bit is used for various effects, for example, to move Mario behind white blocks in Super Mario Bros 3, or to render fog on top of sprites in Castlevania 3.</p>
<p><a name="nes-graphics-2-8x16"></a>[6] The PPU also has an option to enable 8√ó16 sprites, used in games such as Contra that have tall characters. Even still, all other restrictions still apply.</p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
		This entry was posted in <a href="http://www.dustmop.io/blog/category/nes/" rel="category tag">nes</a> and tagged <a href="http://www.dustmop.io/blog/tag/graphics/" rel="tag">graphics</a>, <a href="http://www.dustmop.io/blog/tag/nes/" rel="tag">nes</a> by <a href="http://www.dustmop.io/blog/author/dustmop/">dustmop</a>. Bookmark the <a href="http://www.dustmop.io/blog/2015/06/08/nes-graphics-part-2/" title="Permalink to NES Graphics ‚Äì Part 2" rel="bookmark">permalink</a>.		
			</footer><!-- .entry-meta -->
</article><!-- #post-## -->

			
			
<div id="comments">

			<h2 id="comments-title">
			3 thoughts on ‚Äú<span>NES Graphics ‚Äì Part 2</span>‚Äù		</h2>

		
		<ol class="commentlist">
				<li class="comment even thread-even depth-1" id="li-comment-182">
		<article id="comment-182" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/b3669f1ff045fcf80672bc14cdfd1e87.png" width="68" height="68" alt="Avatar" class="avatar avatar-68wp-user-avatar wp-user-avatar-68 alignnone photo avatar-default"><cite class="fn">Pooter</cite> on <a href="#comment-182"><time pubdate="" datetime="2015-06-08T16:20:19+00:00">June 8, 2015 at 4:20 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I used to work with the NES hardware and understand it fairly well. I still enjoy reading these articles.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="http://www.dustmop.io/blog/2015/06/08/nes-graphics-part-2/?replytocom=182#respond" onclick="return addComment.moveForm( &quot;comment-182&quot;, &quot;182&quot;, &quot;respond&quot;, &quot;104&quot; )" aria-label="Reply to Pooter">Reply ‚Üì</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-995">
		<article id="comment-995" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/ea0d893072b5fa9561687db6e0e1495f.png" width="68" height="68" alt="Avatar" class="avatar avatar-68wp-user-avatar wp-user-avatar-68 alignnone photo avatar-default"><cite class="fn">Peter</cite> on <a href="#comment-995"><time pubdate="" datetime="2015-09-24T20:54:28+00:00">September 24, 2015 at 8:54 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I love these articles! Please keep making them! Growing up with a NES/SNES this is very interesting! I always wondered about those flickering sprites, but now I know and have to tell all my friends! <img draggable="false" class="emoji" alt="üôÇ" src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/1f642.svg"></p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="http://www.dustmop.io/blog/2015/06/08/nes-graphics-part-2/?replytocom=995#respond" onclick="return addComment.moveForm( &quot;comment-995&quot;, &quot;995&quot;, &quot;respond&quot;, &quot;104&quot; )" aria-label="Reply to Peter">Reply ‚Üì</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href="https://rulrok.wordpress.com/2016/12/07/3dnes-and-how-nintendo-could-have-improved-upon-nes-titles-for-3ds-on-the-virtual-store/" rel="external nofollow" class="url">3DNes and how Nintendo could have improved upon NES titles for 3DS on the virtual store ‚Äì Reuel's</a></p>
	</li><!-- #comment-## -->
		</ol>

		
	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="http://www.dustmop.io/blog/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required="required"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" required="required"></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="104" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="7a1599dd01"></p><p style="display: none;"></p>			<input type="hidden" id="ak_js" name="ak_js" value="1654417205727"></form>
			</div><!-- #respond -->
	
</div><!-- #comments -->
		
	</div><!-- #content -->
</div><!-- #primary -->


	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">

			
			<div id="site-generator">
								<a href="http://wordpress.org/" title="A Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress</a>
				<span class="sep"> | </span>
				Theme: Duster by <a href="http://automattic.com/" rel="designer">Automattic</a>.			</div>
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type="text/javascript" src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/comment-reply.min.js.download"></script>
<script type="text/javascript" src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/wp-embed.min.js.download"></script>
<script async="async" type="text/javascript" src="./NES Graphics ‚Äì Part 2 _ dustmop.io blog_files/form.js.download"></script>


</body></html>